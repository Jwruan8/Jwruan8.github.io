<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 6.0.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-MyBatis" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/02/11/MyBatis/" class="article-date">
  <time class="dt-published" datetime="2022-02-11T05:54:44.542Z" itemprop="datePublished">2022-02-11</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>第一章<br>一、三层架构<br>界面层：和用户打交道的， 接收用户的请求参数， 显示处理结果的。（jsp，html，servlet）<br>业务逻辑层：接收了界面层传递的数据，计算逻辑，调用数据库，获取数据<br>数据访问层：就是访问数据库， 执行对数据的查询，修改，删除等等的。</p>
<p>三层对应的包：<br>界面层：controller包 （servlet）接收用户请求，显示处理结果，使用框架SpringMVC。<br>业务逻辑层：service 包（XXXService类）Spring创建service，Dao，工具类等，使用框架Spring。<br>数据访问层（持久层）：dao包（XXXDao类）访问数据库，对数据库进行增删改查，使用框架MyBatis。</p>
<p>三层中类的交互：<br>用户使用界面层–&gt; 业务逻辑层—&gt;数据访问层（持久层）–&gt;数据库（mysql）；</p>
<p>三层对应的处理框架：<br>界面层—servlet—springmvc（框架）；<br>业务逻辑层—service类–spring（框架）；<br>数据访问层—dao类–mybatis（框架）；</p>
<p>二、框架<br>框架是一个舞台， 一个模版。<br>模版：1、规定了好一些条款，内容。 2、加入自己的东西<br>框架是一个模块：<br>1、框架中定义好了一些功能。这些功能是可用的。<br>2、可以加入项目中自己的功能， 这些功能可以利用框架中写好的功能。</p>
<p>框架是一个软件，半成品的软件，定义好了一些基础功能，需要加入你的功能就是完整的。<br>基础功能是可重复使用的，可升级的。</p>
<p>框架特点：<br>1、框架一般不是全能的， 不能做所有事情<br>2、框架是针对某一个领域有效。 特长在某一个方面，比如mybatis做数据库操作强，但是他不能做其它的。<br>3、框架是一个软件，</p>
<p>mybatis框架：<br>    一个框架，早期叫做ibatis,  代码在github。<br>    mybatis：是 MyBatis SQL Mapper Framework for Java （sql映射框架）<br>    1）sql mapper：sql映射<br>    可以把数据库表中的一行数据  映射为 一个java对象，<br>    一行数据可以看做是一个java对象，操作这个对象，就相当于操作表中的数据<br>    2）Data Access Objects（DAOs）：数据访问 ， 对数据库执行增删改查。</p>
<p>mybatis提供了哪些功能：<br>1、提供了创建Connection，Statement，ResultSet的能力，不用开发人员创建这些对象了<br>2、提供了执行sql语句的能力， 不用你执行sql<br>3、提供了循环sql，JDBC中得到的结果集可以直接循环，不用再使用while的方式。<br>    把sql的结果转为java对象，List集合的能力<br>    while (rs.next()) {；<br>        Student stu &#x3D; new Student()；<br>        stu.setId(rs.getInt(“id”)；<br>        stu.setName(rs.getString(“name”))；<br>        stu.setAge(rs.getInt(“age”))；<br>        &#x2F;&#x2F;  从数据库取出数据转为 Student 对象，封装到 List 集合<br>        stuList.add(stu)；<br>      }<br>4、提供了关闭资源的能力，不用你关闭Connection, Statement, ResultSet</p>
<pre><code>开发人员做的是：提供sql语句
最后是：开发人员提供sql语句--mybatis处理sql---开发人员得到List集合或java对象（表中的数据）

总结：（什么是Mybatis）
mybatis是一个sql映射框架，提供的数据库的操作能力，增强的JDBC，
使用mybatis让开发人员集中精神写sql就可以了，
不必关心Connection，Statement，ResultSet的创建，销毁，sql的执行。 
</code></pre>
<p>5、MyBatis的作用：增强的jdbc，访问数据库，执行增删改查<br>6、MyBatis的基本步骤：<br>    1）加入maven的依赖，在pom.xml文件中创建org.mybatis的依赖<br>    2）创建Dao接口：定义了你操作数据的方法<br>    3）创建mapper文件，也叫做sql映射文件，写sql语句的，和接口中方法对应的sql语句<br>        mapper文件也存在于Dao包中。<br>    4）创建一个MyBatis.xml的主配置文件：连接和写进数据库，执行mapper文件的位置。<br>    5）创建测试文件，使用MyBatis的对象的SqlSession，通过它的方法执行sql语句。</p>
<p>第二章：<br>一、主要类的介绍<br>1）Resources：mybatis中的一个类，负责读取主配置文件<br>    InputStream in &#x3D; Resources.getResourceAsStream(“mybatis.xml”)；</p>
<p>2）SqlSessionFactoryBuilder：先创建SqlSessionFactoryBuilder对象，在创建SqlSessionFactory对象，<br>    SqlSessionFactoryBuilder builder  &#x3D; new SqlSessionFactoryBuilder()；<br>        &#x2F;&#x2F; 创建SqlSessionFactory对象，<br>        SqlSessionFactory factory &#x3D; builder.build(in)；</p>
<p>3）SqlSessionFactory ：重量级对象，程序创建一个对象耗时比较长，使用资源比较多。<br>        在整个项目中，有一个就够用了。<br>    SqlSessionFactory：接口，接口实现类：DefaultSqlSessionFactory<br>    SqlSessionFactory作用：获取SqlSession对象<br>    SqlSession sqlSession &#x3D; factory.openSession()；</p>
<pre><code>openSession()方法说明：
1、openSession() ：无参数的， 获取是非自动提交事务的SqlSession对象
2、openSession(boolean)：openSession(true)，获取自动提交事务的SqlSession. 
    openSession(false)  非自动提交事务的SqlSession对象
</code></pre>
<p>4）SqlSession：<br>    SqlSession接口：定义了操作数据的方法<br>    例如 selectOne()，selectList()，insert()，update()，delete()，commit()，rollback()<br>    SqlSession接口的实现类DefaultSqlSession。</p>
<pre><code>使用要求：SqlSession对象不是线程安全的，需要在方法内部使用，在执行sql语句之前，
使用openSession()获取SqlSession对象。
在执行完sql语句后，需要关闭它，执行SqlSession.close(). 这样能保证他的使用是线程安全的。
</code></pre>
<p>第三章：<br>一、动态代理：什么是mybatis的动态代理，<br>    mybatis帮你创建dao接口的实现类，获得动态代理，<br>    使用sqlSession.getMapper(dao接口.class) 获取这个dao接口的对象；<br>    在实现类中调用SqlSession的方法执行sql语句。</p>
<p>二、传入参数：<br>从java代码中把数据传入到mapper文件的sql语句中：<br>1）parameterType：写在mapper文件中的一个属性。 表示dao接口中方法的参数的数据类型。<br>    例如：StudentDao接口<br>    public Student  selectStudentById(Integer id)；</p>
<p>2）一个简单类型的参数：<br>    简单类型：mybatis把java的基本数据类型和String都叫简单类型。<br>    在mapper文件获取简单类型的一个参数的值，使用 #{任意字符}；</p>
<p>接口：public Student  selectStudentById(Integer id)<br>mapper：select id,name, email,age from student where id&#x3D;#{studentId}；</p>
<p>3）多个参数，使用@Param命名参数<br>    接口：<br>public List<Student> selectMulitParam(@Param(“myname”) String name, @Param(“myage”) Integer age)；<br>    使用@Param(“参数名”)  String name；<br>    mapper文件：<br><select>；select * from student where name&#x3D;#{myname} or age&#x3D;#{myage}；</select>；</p>
<p>4）多个参数，使用java对象，这个是使用最多的。<br>    语法 #{属性名}；<br>    vo：value object , 放一些存储数据的类。比如说 提交请求参数， name ,age<br>    现在想把name，age 传给一个service 类。<br>    vo：view object , 从servlet把数据返回给浏览器使用的类，表示显示结果的类。<br>    pojo：普通的有set，get方法的java类。 普通的java对象<br>    Servlet — StudentService(addStudent( MyParam  param)）<br>    entity(domain域)：实体类，和数据库中的表对应的类， </p>
<p>5）多个参数传值，按位置传值<br>    mybatis.3.4之前 #{0} #{1}<br>    mybatis.3.4之后 #{0} #{1} #{2} 以此类推</p>
<p>6）多个参数传值，按Map传值<br>    List<Student> selectMultiByMap(Map&lt;String, Object&gt; map)；<br>    多个参数使用Map，使用的语法：#{map的key}</p>
<p>7）# 和  $<br>    select id，name，email，age from student where id&#x3D;#{studentId}<br>    # 的结果： select id,name, email,age from student where id&#x3D;? </p>
<pre><code>select id，name，email，age from student where id=$&#123;studentId&#125;
$ 的结果：select id,name, email,age from student where id=1001

String sql=&quot;select id，name，email，age from student where id=&quot; + &quot;1001&quot;；
使用的Statement对象执行sql，效率比PreparedStatement低，容易产生sql注入！

$：可以替换表名或者列名， 你能确定数据是安全的。可以使用$
</code></pre>
<p>8）#和$区别：<br>    1、#使用 ？在sql语句中做占位符的， 使用PreparedStatement执行sql，效率高<br>    2、#能够避免sql注入，更安全。<br>    3、$不使用占位符，是字符串连接方式，使用Statement对象执行sql，效率低<br>    4、$有sql注入的风险，缺乏安全性。<br>    5、$：可以替换表名或者列名</p>
<p>三、mybatis的输出结果<br>mybatis执行了sql语句，得到java对象；</p>
<p>1）resultType结果类型，指sql语句执行完毕后， 数据转为的java对象， java类型是任意的。<br>    resultType结果类型的它值：1、类型的全限定名称   2、类型的别名， 例如 java.lang.Integer别名是int</p>
<p>处理方式：<br>    1、mybatis执行sql语句， 然后mybatis调用类的无参数构造方法，创建对象。<br>    2、mybatis把ResultSet指定列值付给同名的属性。</p>
<pre><code>&lt;select id=&quot;selectMultiPosition&quot; resultType=&quot;com.bjpowernode.domain.Student&quot;&gt;；
select id，name，email，age from student
&lt;/select&gt;；
</code></pre>
<p>对等的jdbc：<br>ResultSet rs &#x3D; executeQuery(“select id,name, email,age from student”）<br>    while(rs.next()）{<br>    Student  student &#x3D; new Student()；<br>    student.setId(rs.getInt(“id”))；<br>    student.setName(rs.getString(“name”)）<br>  }</p>
<p>2）定义自定义类型的别名<br>    1、在mybatis主配置文件中定义，使<typeAlias>定义别名<br>    2、可以在resultType中使用自定义别名</p>
<p>3）resultMap：结果映射， 指定列名和java对象的属性对应关系。<br>    1、你自定义列值赋值给哪个属性<br>    2、当你的列名和属性名不一样时，一定使用resultMap</p>
<pre><code>resultMap和resultType不要一起用，二选一
</code></pre>
<p>第四章：<br>一、动态sql<br>动态sql：sql的内容是变化的，可以根据条件获取到不同的sql语句。<br>主要是where部分发生变化。</p>
<p>动态sql的实现，使用的是mybatis提供的标签，<if>，<where>，<foreach><br>动态sql，使用java对象作为参数；<br>1）<if>是判断条件的，如果条件为true，就会把if之间的sql加入到主sql之后<br>    语法：<if test="判断java对象的属性值"><br>            部分sql语句；<br>           </if></p>
<p>2）<where> 用来包含多个<if>的， 当多个if有一个成立的，<where>会自动增加一个where关键字，<br>    并去掉 if 中多余的and，or等。</p>
<p>3）<foreach> 循环java中的数组，list集合的。 主要用在sql的in语句中。<br>学生id是 1001，1002，1003的三个学生<br>&#x2F;&#x2F; 普通定义的一个字符串连接方法。<br>select * from student where id in (1001,1002,1003）<br>public List<Student> selectFor(List<Integer> idlist）<br>List<Integer> list &#x3D; new ，，，<br>list.add(1001)；<br>list.add(1002)；<br>list.add(1003)；<br>dao.selectFor(list）</p>
<foreach collection="" item="" open="" close="" separator="">
    #{xxx}
</foreach>

<p>collection：表示接口中的方法参数的类型，如果是数组使用array，如果是list集合使用list<br>item：自定义的，表示数组和集合成员的变量<br>open：循环开始是的字符<br>close：循环结束时的字符<br>separator：集合成员之间的分隔符</p>
<p>4）sql代码片段就是复用一些语法<br>步骤：<br>1、先定义，<sql id="自定义名称唯一">  sql语句， 表名，字段等 </sql><br>2、再使用，<include refid="id的值" /></p>
<p>第五章：<br>1、数据库的属性配置文件：<br>把数据库连接信息放到一个单独的文件中，和mybatis主配置文件分开，<br>目的是便于修改、保存、处理多个数据库的信息。</p>
<p>1）在resources目录中定义一个属性配置文件，xxxx.properties ，例如 jdbc.properties<br>在属性配置文件中，定义数据，格式是 key&#x3D;value<br>    key：一般使用 . 做多级目录的。<br>    例如：jdbc.mysql.driver， jdbc.driver, mydriver<br>    1、jdbc.driver &#x3D; com.mysql.jdbc.Driver<br>    2、jdbc.url &#x3D; jdbc:mysql&#x2F;&#x2F;localhost：3306&#x2F;springdb<br>    3、jdbc.username &#x3D; root<br>    4、jdbc.password &#x3D; 123456</p>
<p>2）在mybatis的主配置文件，使用<property> 指定文件的位置<br>在需要使用值的地方：${key}</p>
<p>2、mapper文件，使用package指定路径<br>：<mappers><br>：     <!--第二种方式： 使用包名
：          name: xml文件（mapper文件）所在的包名, 这个包中所有xml文件一次都能加载给mybatis
：          使用package的要求：
：          1、mapper文件名称需要和接口名称一样， 区分大小写的一样
：          2、mapper文件和dao接口需要在同一目录
：     --><br>：     <package name="com.bjpowernode.dao"/><br>：</mappers></p>
<p>第六章：PageHelper<br>PageHelper：做数据分页的</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/02/11/MyBatis/" data-id="ckzhzxndc0000aw88hdq9aep0" data-title="" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-我-的-第-一-篇-博-客-文-章" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/02/11/%E6%88%91-%E7%9A%84-%E7%AC%AC-%E4%B8%80-%E7%AF%87-%E5%8D%9A-%E5%AE%A2-%E6%96%87-%E7%AB%A0/" class="article-date">
  <time class="dt-published" datetime="2022-02-11T05:47:26.000Z" itemprop="datePublished">2022-02-11</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/02/11/%E6%88%91-%E7%9A%84-%E7%AC%AC-%E4%B8%80-%E7%AF%87-%E5%8D%9A-%E5%AE%A2-%E6%96%87-%E7%AB%A0/">我 的 第 一 篇 博 客 文 章</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/02/11/%E6%88%91-%E7%9A%84-%E7%AC%AC-%E4%B8%80-%E7%AF%87-%E5%8D%9A-%E5%AE%A2-%E6%96%87-%E7%AB%A0/" data-id="ckzhzxndm0002aw88cgz8280g" data-title="我 的 第 一 篇 博 客 文 章" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-hello-world" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/02/11/hello-world/" class="article-date">
  <time class="dt-published" datetime="2022-02-11T05:39:37.838Z" itemprop="datePublished">2022-02-11</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/02/11/hello-world/">Hello World</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>Welcome to <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a target="_blank" rel="noopener" href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a target="_blank" rel="noopener" href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/02/11/hello-world/" data-id="ckzhzxndh0001aw880ab6as7r" data-title="Hello World" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  


</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/02/">February 2022</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2022/02/11/MyBatis/">(no title)</a>
          </li>
        
          <li>
            <a href="/2022/02/11/%E6%88%91-%E7%9A%84-%E7%AC%AC-%E4%B8%80-%E7%AF%87-%E5%8D%9A-%E5%AE%A2-%E6%96%87-%E7%AB%A0/">我 的 第 一 篇 博 客 文 章</a>
          </li>
        
          <li>
            <a href="/2022/02/11/hello-world/">Hello World</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2022 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>